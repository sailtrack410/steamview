# IFLOW.md

项目上下文文件，用于为 iFlow CLI 提供项目信息和指导。

---

## 项目概述

**项目名称**: Steam View

**项目类型**: Halo 博客系统插件开发项目

**项目描述**: 
开发一个 Halo 博客系统插件，用于展示用户的 Steam 游戏库及游戏时长统计。插件通过 Steam Web API 获取用户游戏数据，以卡片形式展示游戏封面、名称、总时长和两周时长，并提供双进度条可视化时长占比。

**当前状态**: 规划阶段（已完成需求分析和技术架构设计）

**创建日期**: 2026-01-14

---

## 目录结构

```
X:\halo\steam-view\
├── word/                                    # 项目文档目录
│   └── Halo Steam 游戏统计插件开发蓝图.md   # 完整的开发蓝图文档
└── IFLOW.md                                 # 项目上下文文件（本文件）
```

---

## 关键文件说明

### word/Halo Steam 游戏统计插件开发蓝图.md
项目的核心开发蓝图文档，包含：
- 项目目标和核心价值
- 详细的功能需求（核心功能、配置功能、用户体验）
- 完整的技术架构设计
- 前端设计规范（页面结构、组件设计、样式规范）
- 后端实现要点（插件结构、API 集成、缓存机制）
- 数据模型设计
- 5 个阶段的开发路线图（预计 10-17 天）
- Halo 官方文档引用和待确认内容清单
- Steam API 参考、错误代码、开发工具推荐等附录

---

## 技术栈

### 前端
- **框架**: Vue.js（版本待确认，参考 Halo 官方推荐）
- **UI 组件**: 待确认（可能使用 Halo 内置组件库）
- **样式方案**: 待确认（CSS/SCSS/预处理器）

### 后端
- **插件框架**: Halo 插件系统
- **API 规范**: 遵循 Halo 官方插件开发规范
- **数据存储**: Halo 内置配置存储机制

### 外部服务
- **Steam Web API**: 获取游戏数据
- **Steam CDN**: 获取游戏封面图片

---

## 核心功能

### 1. Steam 数据集成
- 通过 Steam API Key 获取用户游戏数据
- 支持用户名验证和匹配
- 自动获取游戏封面（Steam 默认封面）

### 2. 数据展示
- **游戏信息**: 游戏封面、游戏名称
- **时长统计**: 总时长、两周内时长
- **可视化**: 双进度条设计
  - 进度条1：该游戏总时长占所有游戏总时长的比例
  - 进度条2：该游戏两周内时长占所有游戏两周时长的比例

### 3. 排序功能
- 默认排序：按两周时长降序
- 可选排序：按总时长、按两周时长、按游戏名称、按最近游玩时间

### 4. 配置功能
- Steam API Key 和用户名输入（带验证）
- 游戏显示过滤（可隐藏特定游戏）
- 数据刷新频率设置（1小时/6小时/24小时，默认24小时）
- 立即刷新按钮

### 5. 用户体验
- 响应式设计（支持桌面端、平板、移动端）
- 卡片式布局自适应
- 错误处理（显示具体失败原因）
- 数据缓存（默认24小时，可自定义）

---

## 开发路线图

### 阶段一：项目初始化（1-2天）
- 创建插件项目结构
- 配置开发环境
- 集成 Halo 插件开发框架
- 创建基础的前端和后端模块

### 阶段二：后端开发（3-5天）
- 实现 Steam API 集成
- 开发数据缓存机制
- 实现配置管理功能
- 创建 REST API 端点
- 编写单元测试

### 阶段三：前端开发（3-5天）
- 实现游戏卡片组件
- 开发配置页面
- 实现排序功能
- 添加响应式设计
- 实现错误处理

### 阶段四：集成测试（2-3天）
- 端到端测试
- 性能优化
- 兼容性测试
- 用户体验测试

### 阶段五：文档和发布（1-2天）
- 编写用户文档
- 准备发布包
- 测试安装流程
- 发布插件

**预计总开发时间**: 10-17 天

---

## Halo 官方文档依赖

⚠️ **重要**: 本项目的具体实现需要参考 Halo 官方插件开发文档。

### 官方文档位置
https://docs.halo.run/category/%E6%8F%92%E4%BB%B6%E5%BC%80%E5%8F%91/

### 需要确认的关键内容
1. 插件项目的标准目录结构
2. 插件主类的命名规范和继承关系
3. 插件生命周期管理（初始化、启动、停止）
4. 插件配置文件格式和位置
5. Vue.js 版本要求
6. 前端组件的注册和使用方式
7. 与 Halo 后端 API 的通信方式
8. 前端资源打包和部署流程
9. 后端服务类的创建和管理
10. REST API 端点的注册规范
11. 数据持久化机制
12. 权限和安全要求
13. 插件打包格式和工具
14. 版本管理规范
15. 依赖管理方式
16. 发布流程和渠道

---

## Steam API 参考

### API 端点
- **获取游戏库**: `https://api.steampowered.com/IPlayerService/GetOwnedGames/v0001/`
- **获取用户信息**: `https://api.steampowered.com/ISteamUser/GetPlayerSummaries/v0002/`

### 获取 Steam API Key
访问 https://steamcommunity.com/dev/apikey

### API 调用限制
- 请求频率限制：每分钟最多 100 次
- 建议使用缓存减少 API 调用

---

## 开发工具推荐

- **IDE**: IntelliJ IDEA / VS Code
- **API 测试**: Postman / curl
- **版本控制**: Git
- **构建工具**: Maven / Gradle（根据 Halo 要求）

---

## iFlow 使用指南

### 常用任务

当在此项目中工作时，iFlow CLI 可以帮助：

1. **项目初始化**:
   - 创建插件项目结构
   - 配置开发环境
   - 集成 Halo 插件框架

2. **代码开发**:
   - 实现后端服务（Steam API 集成、缓存机制、配置管理）
   - 实现前端组件（游戏卡片、配置表单、排序选择器）
   - 创建 REST API 端点

3. **测试和调试**:
   - 编写单元测试
   - 端到端测试
   - 性能优化

4. **文档和发布**:
   - 编写用户文档
   - 准备发布包
   - 测试安装流程

### 重要提醒

- 所有代码实现必须遵循 Halo 官方插件开发规范
- 在开始编码前，务必参考 Halo 官方文档确认技术细节
- 前端使用 Vue.js，后端遵循 Halo 插件架构
- 注意 Steam API 的调用频率限制，合理使用缓存机制

---

## 项目约定

### 命名规范
- 插件名称: Steam View
- 包结构: 参考 Halo 官方文档
- 组件命名: 遵循 Vue.js 规范（PascalCase）
- API 端点: 遵循 RESTful 规范

### 代码风格
- 前端: 遵循 Vue.js 官方风格指南
- 后端: 遵循 Halo 插件开发规范
- 注释: 关键逻辑添加中文注释

### 提交规范
- 使用清晰的提交信息
- 提交前进行代码审查
- 确保所有测试通过

---

## 联系信息

如有问题或建议，请参考项目文档或联系项目维护者。

---

**最后更新**: 2026-01-14